<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Live Stream Player</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background-color: black;
      }
      #video {
        width: 100vw;
        height: 100vh;
        object-fit: contain;
        background-color: black;
        display: block;
      }
      #watermark {
        position: fixed;
        bottom: 10px;
        right: 10px;
        opacity: 0.5;
        font-size: 18px;
        color: white;
        pointer-events: none;
        user-select: none;
        z-index: 9999;
        font-family: Arial, sans-serif;
        text-shadow: 0 0 5px black;
      }
    </style>
  </head>
  <body>
    <video id="video" class="video-js vjs-default-skin" controls autoplay muted playsinline></video>
    <div id="watermark">© حقوقي</div>

    <script>
      function getStreamUrl() {
        const params = new URLSearchParams(window.location.search);
        return params.get("stream");
      }

      const video = document.getElementById('video');
      const streamUrl = getStreamUrl();

      if (!streamUrl) {
        alert("لم يتم تحديد رابط البث في الرابط. استخدم ?stream=رابط.m3u8 أو mp4");
      } else {
        if (streamUrl.endsWith(".m3u8")) {
          if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(streamUrl);
            hls.attachMedia(video);
          } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = streamUrl;
          } else {
            alert("متصفحك لا يدعم HLS");
          }
        } else {
          // دعم مباشر لملفات mp4 أو غيرها
          video.src = streamUrl;
        }
      }
    </script>
  </body>
</html>
